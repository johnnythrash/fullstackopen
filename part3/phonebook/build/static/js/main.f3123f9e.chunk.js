(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t.n(o),a=t(14),r=t.n(a),s=t(3),u=t(0),i=function(e){var n=e.value,t=e.text,o=e.onChange;return Object(u.jsxs)("div",{children:[t,Object(u.jsx)("input",{value:n,onChange:o})]})},l=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook:"}),Object(u.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(u.jsx)(i,{text:"name: ",value:e.newName,onChange:e.handleNameChange}),Object(u.jsx)(i,{text:"number: ",value:e.newNumber,onChange:e.handleNumberChange}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},d=t(4),m=t.n(d),b="/api/persons",j={getAll:function(){return m.a.get(b)},createPerson:function(e){return m.a.post(b,e)},update:function(e,n){return m.a.put("".concat(b,"/").concat(e),n)},removePerson:function(e){return console.log("".concat(b,"/").concat(e)),m.a.delete("".concat(b,"/").concat(e))}},f=function(e){var n=e.namesToShow,t=e.setPersons,o=e.setConfirmMessage,c=function(e){e.preventDefault();var n=e.target.name,c=e.target.id;window.confirm("do you really want to remove ".concat(n,"?"))&&j.removePerson(c).then(j.getAll().then((function(e){t(e.data),console.log(e.data),o({type:"error",message:"removed ".concat(n," from phonebook")}),setTimeout((function(){o(null)}),5e3)}))).catch((function(e){o({type:"error",message:"error, name does not exist on server!"}),console.log(e)}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Numbers:"}),Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{children:["Name:",e.name," ",e.number," ",Object(u.jsx)("button",{id:e.id,name:e.name,onClick:c,children:"delete"})]},e.id)}))})]})},h=function(e){var n=e.confirmMessage;return null===n?null:"success"===n.type?Object(u.jsx)("div",{className:"notifySuccess",children:n.message}):"error"===n.type?Object(u.jsx)("div",{className:"notifyError",children:n.message}):void 0},g=(t(38),function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),r=Object(s.a)(a,2),d=r[0],m=r[1],b=Object(o.useState)(" "),g=Object(s.a)(b,2),p=g[0],O=g[1],v=Object(o.useState)(""),x=Object(s.a)(v,2),w=x[0],y=x[1],C=Object(o.useState)(null),N=Object(s.a)(C,2),S=N[0],k=N[1];Object(o.useEffect)((function(){j.getAll().then((function(e){c(e.data)}))}),[]);var P=w.length<1?t:t.filter((function(e){return e.name.toUpperCase().includes(w.toUpperCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{confirmMessage:S}),Object(u.jsx)(i,{text:"filter",value:w,onChange:function(e){y(e.target.value),console.log(w)}}),Object(u.jsx)(l,{onSubmit:function(e){e.preventDefault();var n={name:d,number:p};if(t.some((function(e){return e.name===d}))){if(window.confirm("".concat(d," is already in phonebook. do you want to replace the number?"))){var o=t.map((function(e){return e.name})).indexOf(d);o?j.update(t[o].id,n).then(j.getAll().then((function(e){c(e.data),k({type:"success",message:"changed number for ".concat(n.name)}),setTimeout((function(){k(null)}),5e3)}))):window.alert("error! couldn't find entry in database")}}else console.log(n.name,n.number),j.createPerson(n).then((function(e){console.log("successful block"),c(t.concat(n)),j.getAll().then((function(e){c(e.data),m(""),O(""),k({type:"success",message:"added ".concat(n.name," to database")}),setTimeout((function(){k(null)}),5e3)}))})).catch((function(e){console.log(e.response.data),k({type:"error",message:e.response.data.error}),j.getAll().then((function(e){return c(e.data)}))}))},newName:d,newNumber:p,handleNameChange:function(e){return m(e.target.value)},handleNumberChange:function(e){return O(e.target.value)}}),Object(u.jsx)(f,{namesToShow:P,setConfirmMessage:k,setPersons:c})]})});r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f3123f9e.chunk.js.map